'use strict';(function(k,q,l){function m(a,c){this.element=a;this._defaults=$.extend(!0,{},n,c);this._variables=f;this._name="codeparlMarkdown";this.init()}k.Prism&&(k.Prism.manual=!0);k.$&&($=k.$);var n={previewOnly:!1,markdown:"",fullscreen:!0,content:{allowScript:!1,image:{types:".jpeg,.jpg,.png,.gif",placeholder:"../src/photo-placeholder.jpg",backendScript:""}},help:{show:!0,link:{url:"https://www.markdownguide.org/basic-syntax/",text:"Advanced help"}},editor:{softTabs:!0,theme:"tomorrow",editorHeight:500,
fontSizes:{Small:12,Normal:16,Large:18,Xlarge:26},defaultFont:"Normal",showGutter:!1},toolbar:{bg:"#F7F7F4",buttonGroups:[{btnHeader1:"H1",btnHeader2:"H2"},{btnBold:"fa-bold",btnItalic:"fa-italic"},{btnList:"fa-list-ul",btnOrderedList:"fa-list-ol",btnRule:"line"},{btnBlock:"fa-quote-left",btnCode:"{ }"},{btnLink:"fa-link"},{btnImage:"fa-image"},{btnFont:"font-size"},{btnEdit:"fa-edit",btnbrowse:"fa-folder-open",btnPreview:"fa-eye",btnFullscreen:"fa-expand"},{btnHelp:"fa-question-circle"}]},onFileBrowse:function(a,
c){if(a[0].files[0]){var b=new FileReader;b.onload=function(e){c.session.setValue(e.target.result);c.clearSelection()};b.readAsText(a[0].files[0])}},onPreview:function(a,c){},onInput:function(a){}},f={aceEditor:null,classPrefix:"cpme-",snippetManager:null,formData:new FormData,$container:null,$editor:null,$preview:null,options:null,converter:new showdown.Converter({ghCompatibleHeaderId:!0,prefixHeaderId:"cpmep-",parseImgDimensions:!0,simplifiedAutoLink:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,
tasklists:!0,ghMentions:!0,ghMentionsLink:"https://github.com/{u}",openLinksInNewWindow:!0,emoji:!0,metadata:!0}),buttonActions:{btnHeader1:{tooltip:"Heading 1 <h1>",action:"h1"},btnHeader2:{tooltip:"Heading 2 <h2>",action:"h2"},btnBold:{tooltip:"Strong <strong> ",action:"bold"},btnItalic:{tooltip:"Empasise <em>",action:"italic"},btnbrowse:{tooltip:"Open a markdown file",action:"browse"},btnCode:{tooltip:"Code Sample <pre><code>",action:"code"},btnBlock:{tooltip:"Blockquote <blockquote>",action:"block"},
btnList:{tooltip:"Bulleted list <ul>",action:"ul"},btnOrderedList:{tooltip:"Numbered list <ol>",action:"ol"},btnRule:{tooltip:"Horizontal rule <hr>",action:"rule"},btnLink:{tooltip:"Hyperlink <a>",action:"link"},btnImage:{tooltip:"Insert image <img>",action:"image"},btnFont:{tooltip:"",action:"font"},btnEdit:{tooltip:"Edit",action:"edit"},btnPreview:{tooltip:"Preview",action:"preview"},btnFullscreen:{tooltip:"Fullscreen",action:"fullscreen"},btnHelp:{tooltip:"Toggle markdown help",action:"help"}},
helpList:{links:{label:"Links",help:"To use links in your markdown text you just have to  use <span> http://codeparl.com - automatic! <br> [a link](https://www.codeparl.com/) <br> Format: [text](url)</span>"},images:{label:"Images",help:"Images are exactly like links, but they have an exclamation mark before  them:<br><span> ![CodeParl logo](https://codeparl.com/storage/images/logo.png) <br> Format: ![Alt Text](url)</span>The word in square brackets is the alt text, which gets displayed if the browser can't show the image. "},
styling:{label:"Styling/Heading",help:"<span> *This is italicized*, and so <br> is _this_. <br> **This is bold**, just like __this__.<br>You can ***combine*** them if you ___really have to___.</span>To break your text into sections, you can use headers: <span>A Large Header<br>============== <br><br>Smaller Subheader<br>-----------------</span>Use hash marks if you need several levels of headers: <span># Header 1 #<br> ## Header 2 ##<br>### Header 3 ###</span> Use dashes if you need a horizontal rule <span>----------</span>"},
lists:{label:"Lists",help:"Both bulleted and numbered lists are possible:<span>- Use a minus sign for a bullet<br>+ Or plus sign<br>* Or an asterisk<br><br>1. Numbered lists are easy<br>2. Markdown keeps track ofthe numbers for you<br>7. So this will be item 3.<hr>1. Lists in a list item:<br> - Indented four spaces.<br> * indented eight spaces.<br>- Four spaces again.<br>2.  You can have multiple<br>  paragraphs in a list items. <br>Just be sure to indent."}},commands:{bold:{name:"bold",bindKey:{win:"Ctrl-B",
mac:"Command-B"},exec:function(){var a=f.aceEditor.session.getTextRange(f.aceEditor.getSelectionRange());0===a.trim().length?(f.snippetManager.insertSnippet(f.aceEditor,"**${1:text}**"),f.aceEditor.find("text")):f.snippetManager.insertSnippet(f.aceEditor,"**"+a+"**");f.aceEditor.focus()},readOnly:!1},italic:{name:"italic",bindKey:{win:"Ctrl-I",mac:"Command-I"},exec:function(){var a=f.aceEditor.session.getTextRange(f.aceEditor.getSelectionRange());""===a?(f.snippetManager.insertSnippet(f.aceEditor,
"*${1:text}*"),f.aceEditor.find("text")):f.snippetManager.insertSnippet(f.aceEditor,"*"+a+"*");f.aceEditor.focus()},readOnly:!1},link:{name:"link",bindKey:{win:"Ctrl-K",mac:"Command-K"},exec:function(){var a=urlModal({title:"Enter Url",body:urlInputs()}).modal("show");getEntredUrl(a,!0)},readOnly:!1}}};m.prototype={init:function(){var a=this._defaults,c=this._variables;this._variables.$editor=$(this.element);this._variables.$container=$(this.element).parent();this._variables.$container.addClass("w-100 border cpmd-container position-relative ").css({backgroundColor:"#F7F7F4"});
a.previewOnly?(this._variables.$editor=this._variables.$preview,this._preview(a.markdown)):(this._variables.$preview=$("<div>").addClass("cpme-preview w-100 markdown-body overflow-auto p-2 bg-white border").hide().appendTo(c.$container).css({height:a.editor.editorHeight+"px"}),this._variables.$editor.css({height:a.editor.editorHeight+"px"}).addClass("cpme-editor w-100"),c=this._toolbar(),c.prependTo(this._variables.$container),c.append($("<div>").addClass("clearfix")),a.help.show&&this._helpBar().insertAfter(c),
this._variables.aceEditor=this._buildAceEditor(),this._triggerEditorActions())},_view:function(a,c){var b=this._variables;a?(b.$editor.show(),b.$preview.hide(),$(".cpme-btn-normal").prop("disabled",!1).removeClass("disabled")):(b.$editor.hide(),b.$preview.show(),a=b.aceEditor.session.getValue(),a=b.converter.makeHtml(a),b.$preview.html(this._disableJs(a)),k.Prism&&Prism.highlightAllUnder(b.$preview[0]),$(".cpme-btn-normal").prop("disabled",!0).addClass("disabled"));c.addClass("active");c.siblings("button").removeClass("active")},
_disableJs:function(a){if(!this._defaults.content.allowScript)return a.replace("<script>","&lt;script&gt;")},_browseMarkdown:function(a){var c=this;a.on("change.codeparlMarkdown",function(){c._defaults.onFileBrowse(a,c._variables.aceEditor)})},_triggerEditorActions:function(){var a=this,c=a._variables;c.$container.find(".cpme-toolbar .cpme-btn").each(function(){$(this).on("click.codeparlMarkdown",function(b){b.preventDefault();b=$(this);var e=b.data("action");$("[data-original-title]").tooltip("hide");
switch(e){case "help":$(".cpme-help-bar").slideToggle("fast");break;case "preview":a._view(!1,b);break;case "edit":a._view(!0,b);break;case "browse":b=b.next(".cpme-file-browser");a._browseMarkdown(b);b.trigger("click.codeparlMarkdown");break;case "fullscreen":$("body").toggleClass("cpme-fullscreen");c.$container.toggleClass("fullscreen");b.find("i").toggleClass("fa-expand fa-compress");b.find("i").hasClass("fa-expand")?b.attr("data-original-title","Fullscreen"):b.attr("data-original-title","Restore");
break;case "h1":a._insertText("# ","type your heading here");break;case "h2":a._insertText("## ","type your heading here");break;case "ul":a._insertText("* ","type your item here");break;case "ol":a._insertText("1. ","type your item here");break;case "rule":a._insertText("----------","rule");break;case "block":a._insertText("> ","type here");break;case "code":a._insertText("``","enter code here");break;case "bold":c.aceEditor.execCommand("bold");break;case "italic":c.aceEditor.execCommand("italic")}})})},
_helpBar:function(){var a=this._defaults,c=this._variables,b=$("<div>");b.addClass(c.classPrefix+"help-bar  w-100   mx-auto py-0 ");for(var e in c.helpList)$("<button>").attr({type:"button","data-key":e}).addClass("btn btn-sm btn-default cpme-help-btn shadow-none ").text(c.helpList[e].label).appendTo(b).on("click.codeparlMarkdown",function(){$(this).siblings(".cpme-help-btn").removeClass("cpmd-yellow");var d=$("."+c.classPrefix+"help-bar-info");d.css({top:b.height(),height:a.editor.editorHeight+"px"});
d.html($("<p>").addClass("p-4 mx-auto ").html(c.helpList[$(this).data("key")].help));d.attr("data-key",$(this).data("key"));d.is(":hidden")&&d.slideDown("fast");$(this).hasClass("cpmd-yellow")&&d.slideUp("fast");$(this).toggleClass("cpmd-yellow")});$("<div>").addClass(c.classPrefix+"help-bar-info  w-100   mx-auto py-0 ").appendTo(b).hide();$("<a>").attr({href:a.help.link.url,target:"_blank"}).text(a.help.link.text).addClass("btn btn-link cpme-help-link float-right").appendTo(b);return b},_insertText:function(a,
c){var b=this._variables,e=b.aceEditor.session.getTextRange(b.aceEditor.getSelectionRange())||"";e.trim();var d=b.aceEditor.find(c,{wrap:!0,caseSensitive:!0,wholeWord:!0,regExp:!1,preventScroll:!0});"rule"===c?(b.aceEditor.insert(a),b.aceEditor.navigateLineEnd()):(null!==d?b.aceEditor.session.replace(d,c):0===b.aceEditor.getCursorPosition().column?"``"===a?b.aceEditor.insert("`"+c+"`"):b.aceEditor.insert(a+c+""):0<e.length?(d=b.aceEditor.getSelectionRange(),"``"===a?(b.aceEditor.insert("`"+e+"`"),
b.aceEditor.session.replace(d,"`"+e+"`")):b.aceEditor.session.replace(d,a+e)):(b.aceEditor.navigateLineStart(),"``"===a?b.aceEditor.insert("`"+c+"`"):b.aceEditor.insert(a+c+" "),b.aceEditor.navigateLineEnd()),0===e.trim().length&&b.aceEditor.find(c),b.aceEditor.focus())},markdown:function(a){if(null!==this._variables.aceEditor){if(a===l)return this._variables.aceEditor.getValue();this._variables.aceEditor.session.setValue(a+"")}},htmlContent:function(){return this._variables.converter.makeHtml(this._variables.aceEditor.session.getValue())},
editor:function(){return this._variables.aceEditor},_preview:function(a){var c=this._defaults,b=this._variables;b.$preview=$(this.element).addClass("cpme-preview markdown-body overflow-auto p-2 bg-white border").appendTo(b.$container).css({height:c.editor.editorHeight+"px",width:c.editor.editorWidth});a=b.converter.makeHtml(a||"");b.$preview.html(this._disableJs(a));k.Prism&&Prism.highlightAllUnder(b.$preview[0])},_addGroup:function(a){return $("<div>").addClass("btn-group cpme-btn-group   mr-1").appendTo(a)},
_toolbar:function(){var a=this._defaults,c=this._variables,b=$("<div>").addClass("cpme-toolbar border-bottom p-1 ").css({backgroundColor:a.toolbar.bg});for(const p in a.toolbar.buttonGroups){var e=a.toolbar.buttonGroups[p],d=this._addGroup(b);for(const g in e)if(c.buttonActions.hasOwnProperty(g)){var h=$("<button>").addClass("btn btn-sm  cpme-btn").attr({"data-action":c.buttonActions[g].action,type:"button"}).attr("title",c.buttonActions[g].tooltip);if(null===e[g].match(/^(fa\-.+?)$/))h.text(e[g]);
else{if(!1===a.fullscreen&&"btnFullscreen"===g)continue;h.html($("<i>").addClass("fa "+e[g]))}d.append(h);"btnHelp"===g&&(a.help.show?d.addClass(c.classPrefix+"md-help   "):d.remove());"btnRule"===g&&(h.html($("<span>").addClass("cpme-rule")),h.addClass("cpme-rule-btn"));"btnFont"===g&&d.html(this._addFontList());"btnEdit"===g&&h.addClass("active");-1!==$.inArray(g,["btnEdit","btnPreview","btnHelp"])?"btnHelp"!==g&&h.append($("<span>").text(c.buttonActions[g].tooltip)):h.addClass("cpme-btn-normal");
"btnFullscreen"===g&&h.removeClass("cpme-btn-normal");"btnbrowse"===g&&$("<input>").attr({type:"file",accept:".md, .markdown"}).addClass("cpme-file-browser ").hide().insertAfter(h);"function"===typeof $().tooltip&&h.tooltip()}}b.find(".cpme-btn-group:lt(5)").wrapAll('<div class="cpme-wrapper-1  animated d-inline-block ">');$("<button>").addClass("btn cpme-more py-0 my-0").append($("<i>").addClass("fa fa-bars ")).insertAfter($(b.find(".cpme-wrapper-1")));b.find(".cpme-btn-group:gt(6)").wrapAll('<div class="cpme-wrapper-2  float-right ">');
b.find(".cpme-more").on("click.codeparlMarkdown",function(){$(this).hasClass("bg-on")?$(".cpme-wrapper-1").removeClass("slideInRight").addClass("slideOutRight"):$(".cpme-wrapper-1").removeClass("slideOutRight").addClass("slideInRight");$(this).toggleClass("bg-on")});return b},_addFontList:function(){var a=this._defaults,c=this._variables,b=$("<select>").addClass("custom-select cpme-font-size py-1 ").on("change.codeparlMarkdown",function(){c.aceEditor.setOption("fontSize",a.editor.fontSizes[$(this).val()])});
for(const d in a.editor.fontSizes){var e=$("<option>").text(d).appendTo(b);d===a.editor.defaultFont&&e.attr("selected","selected")}return b},_buildAceEditor:function(){var a=this,c=a._defaults,b=a._variables,e=$(a.element),d=ace.edit(e.get(0));d.setTheme("ace/theme/"+c.editor.theme);d.getSession().setMode("ace/mode/markdown");d.getSession().setUseWrapMode(!0);d.getSession().setUseSoftTabs(c.editor.softTabs);d.setOptions({showGutter:c.editor.showGutter});d.getSession().setValue("");d.setOption("fontSize",
c.editor.fontSizes[c.editor.defaultFont]);ace.config.loadModule("ace/ext/language_tools",function(){a._variables.snippetManager=ace.require("ace/snippets").snippetManager;d.commands.addCommand(b.commands.bold);d.commands.addCommand(b.commands.italic);d.commands.addCommand(b.commands.link)});d.on("input",function(){c.onInput(d.getValue())});return d}};$.fn.codeparlMarkdown=function(a){var c=arguments;if(a===l||"object"===typeof a)return this.each(function(){$.data(this,"codeparlMarkdown")||$.data(this,
"codeparlMarkdown",new m(this,a))});if("string"===typeof a&&a){var b;this.each(function(){var e=$.data(this,"codeparlMarkdown");e instanceof m&&"function"===typeof e[a]&&(b=e[a].apply(e,Array.prototype.slice.call(c,1)));"destroy"===a&&$.data(this,"codeparlMarkdown",null)});return b!==l?b:this}$.error("The method "+a+" does not exist on codeparlMarkdown")}})(window,document);